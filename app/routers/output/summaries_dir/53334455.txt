in the last few years there has been a lot of interest in quantum repeater protocols using only atomic ensembles and linear optics . here we show that the local generation of high - fidelity entangled pairs of atomic excitations , in combination with the use of two - photon detections for long - distance entanglement generation , permits the implementation of a very attractive quantum repeater protocol . such a repeater is robust with respect to phase fluctuations in the transmission channels , and at the same time achieves higher entanglement generation rates than other protocols using the same ingredients . we propose an efficient method of generating high - fidelity entangled pairs locally , based on the partial readout of the ensemble - based memories . we also discuss the experimental implementation of the proposed protocol .