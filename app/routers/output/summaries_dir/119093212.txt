we implement an ensemble quantum counting algorithm on three nmr spectrometers with 1h resonance frequencies of 500 , 600 and 750 mhz . at higher frequencies , the results deviate markedly from naive theoretical predictions . these systematic errors can be attributed almost entirely to off - resonance effects , which can be substantially corrected for using fully - compensating composite rotation pulse sequences originally developed by tycko . we also derive an analytic expression for generating such sequences with arbitrary rotation angles .