short - depth algorithms are crucial for reducing computational error on near - term quantum computers , for which decoherence and gate infidelity remain important issues . here we present a machine - learning approach for discovering such algorithms . we apply our method to a ubiquitous primitive : computing the overlap $ { \rm tr}(\rho\sigma)$ between two quantum states $ \rho$ and $ \sigma$. the standard algorithm for this task , known as the swap test , is used in many applications such as quantum support vector machines , and , when specialized to $ \rho = \sigma$ , quantifies the renyi entanglement . here , we find algorithms that have shorter depths than the swap test , including one that has a constant depth ( independent of problem size ) . furthermore , we apply our approach to the hardware - specific connectivity and gate sets used by rigetti 's and ibm 's quantum computers and demonstrate that the shorter algorithms that we derive significantly reduce the error - compared to the swap test - on these computers .