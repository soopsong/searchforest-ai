we provide a general method to find the hamiltonian of a linear circuit in the presence of a nonlinearity . focussing on the case of a josephson junction embedded in a transmission - line resonator , we solve for the normal modes of the system by taking into account exactly the effect of the quadratic ( i.e. inductive ) part of the josephson potential . the nonlinearity is then found to lead to self and cross - kerr effect , as well as beam - splitter type interactions between modes . by adjusting the parameters of the circuit , the kerr coefficient k can be made to reach values that are weak ( k<\kappa ) , strong ( k>\kappa ) or even very strong ( k>>\kappa ) with respect to the photon - loss rate \kappa . in the latter case , the resonator+junction circuit corresponds to an in - line version of the transmon . by replacing the single junction by a squid , the kerr coefficient can be tuned in - situ , allowing for example the fast generation of schr\"odinger cat states of microwave light . finally , we explore the maximal strength of qubit - resonator coupling that can be reached in this setting .