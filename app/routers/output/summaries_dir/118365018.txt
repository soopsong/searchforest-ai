we study , experimentally and theoretically , the controlled transfer of harmonically trapped ultracold gases between different quantum states . in particular we experimentally demonstrate a fast decompression and displacement of both a non - interacting gas and an interacting bose - einstein condensate which are initially at equilibrium . the decompression parameters are engineered such that the final state is identical to that obtained after a perfectly adiabatic transformation despite the fact that the fast decompression is performed in the strongly non - adiabatic regime . during the transfer the atomic sample goes through strongly out - of - equilibrium states while the external confinement is modified until the system reaches the desired stationary state . the scheme is theoretically based on the invariants of motion and scaling equations techniques and can be generalized to decompression trajectories including an arbitrary deformation of the trap . it is also directly applicable to arbitrary initial non - equilibrium states .