measurements of quantum systems can be used to generate classical data that is truly unpredictable for every observer . however , this true randomness needs to be discriminated from randomness due to ignorance or lack of control of the devices . we analyze the randomness gain of a measurement - device - independent setup , consisting of a well - characterized source of quantum states and a completely uncharacterized and untrusted detector . our framework generalizes previous schemes as arbitrary input states and arbitrary measurements can be analyzed . our method is used to suggest simple and realistic implementations that yield high randomness generation rates of more than one random bit per qubit for detectors of sufficient quality .