we study a feedback scheme to stabilize an arbitrary photon number state in a microwave cavity . the quantum non - demolition measurement of the cavity state allows a non - deterministic preparation of fock states . here , by the mean of a controlled field injection , we desire to make this preparation process deterministic . the system evolves through a discrete - time markov process and we design the feedback law applying lyapunov techniques . also , in our feedback design we take into account an unavoidable pure delay and we compensate it by a stochastic version of a smith predictor . after illustrating the efficiency of the proposed feedback law through simulations , we provide a rigorous proof of the global stability of the closed - loop system based on tools from stochastic stability analysis . a brief study of the lyapunov exponents of the linearized system around the target state gives a strong indication of the robustness of the method .