at the very foundation of the second law of thermodynamics lies the fact that no heat engine operating between two reservoires of temperatures $ t_c\leq t_h$ can overperform the ideal carnot engine : $ \langle w \rangle / \langle q_h \rangle \leq 1-t_c / t_h$. this inequality follows from an exact fluctuation relation involving the nonequilibrium work $ w$ and heat exchanged with the hot bath $ q_h$. in a previous work [ sinitsyn n a , j. phys . a : math . theor . { \bf 44 } ( 2011 ) 405001 ] this fluctuation relation was obtained under the assumption that the heat engine undergoes a stochastic jump process . here we provide the general quantum derivation , and also extend it to the case of refrigerators , in which case carnot 's statement reads : $ \langle q_c \rangle / |\langle w \rangle| \leq ( t_h / t_c-1)^{-1}$.