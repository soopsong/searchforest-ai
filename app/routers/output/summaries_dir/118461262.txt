we consider an ultracold quantum degenerate gas in an optical lattice inside a cavity . this system represents a simple but key model for"quantum optics with quantum gases,"where a quantum description of both light and atomic motion is equally important . due to the dynamical entanglement of atomic motion and light , the measurement of light affects the many - body atomic state as well . the conditional atomic dynamics can be described using the quantum monte carlo wave function simulation method . in this paper , we emphasize how this usually complicated numerical procedure can be reduced to an analytical solution after some assumptions and approximations valid for macroscopic bose - einstein condensates ( bec ) with large atom numbers . the theory can be applied for lattices with both low filling factors ( e.g. one atom per lattice site in average ) and very high filling factors ( e.g. a bec in a double - well potential ) . the purity of the resulting multipartite entangled atomic state is analyzed .