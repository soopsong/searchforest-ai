we show how techniques from machine learning and optimization can be used to find circuits of photonic quantum computers that perform a desired transformation between input and output states . in the simplest case of a single input state , our method discovers circuits for preparing a desired quantum state . in the more general case of several input and output relations , our method obtains circuits that reproduce the action of a target unitary transformation . we use a continuous - variable quantum neural network as the circuit architecture . the network is composed of several layers of optical gates with variable parameters that are optimized by applying automatic differentiation using the tensorflow backend of the strawberry fields photonic quantum computer simulator . we demonstrate the power and versatility of our methods by learning how to use short - depth circuits to synthesize single photons , gottesman - kitaev - preskill states , noon states , cubic phase gates , random unitaries , cross - kerr interactions , as well as several other states and gates . we routinely obtain high fidelities above 99\% using short - depth circuits , typically consisting of a few hundred gates . the circuits are obtained automatically by simply specifying the target state or gate and running the optimization algorithm .